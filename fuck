#!/data/data/com.termux/files/usr/bin/bash

#============================================
# Root Access Checker for Termux
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö root access ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
#============================================

# ‡∏™‡∏µ
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
MAGENTA='\033[0;35m'
WHITE='\033[1;37m'
NC='\033[0m'

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
print_header() {
    echo ""
    echo -e "${BLUE}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${NC}"
    echo -e "${BLUE}‚ïë     üîê Root Access Checker v2.0 üîê      ‚ïë${NC}"
    echo -e "${BLUE}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
    echo ""
}

print_section() {
    echo ""
    echo -e "${CYAN}‚ñ∂ $1${NC}"
    echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
}

print_success() {
    echo -e "${GREEN}‚úì${NC} $1"
}

print_error() {
    echo -e "${RED}‚úó${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}‚ö†${NC} $1"
}

print_info() {
    echo -e "${BLUE}‚Ñπ${NC} $1"
}

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Termux ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
check_termux() {
    if [ ! -d "/data/data/com.termux" ]; then
        print_error "Not running in Termux!"
        exit 1
    fi
}

# ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
command_exists() {
    command -v "$1" &> /dev/null
}

#============================================
# 1. ‡πÄ‡∏ä‡πá‡∏Ñ su command
#============================================
check_su_command() {
    print_section "1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á su"
    
    if command_exists su; then
        print_success "‡∏û‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á su"
        
        # ‡∏´‡∏≤ path
        SU_PATH=$(which su 2>/dev/null)
        if [ -n "$SU_PATH" ]; then
            echo "  Path: ${GREEN}$SU_PATH${NC}"
            
            # ‡πÄ‡∏ä‡πá‡∏Ñ permissions
            if [ -x "$SU_PATH" ]; then
                echo "  Permissions: ${GREEN}Executable${NC}"
            else
                echo "  Permissions: ${RED}Not executable${NC}"
            fi
            
            # ‡πÄ‡∏ä‡πá‡∏Ñ file type
            FILE_TYPE=$(file "$SU_PATH" 2>/dev/null | cut -d: -f2)
            echo "  Type:${FILE_TYPE}"
        fi
        
        SU_AVAILABLE=true
    else
        print_error "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á su"
        SU_AVAILABLE=false
    fi
}

#============================================
# 2. ‡πÄ‡∏ä‡πá‡∏Ñ tsu (Termux su wrapper)
#============================================
check_tsu() {
    print_section "2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö tsu (Termux su wrapper)"
    
    if command_exists tsu; then
        print_success "‡∏û‡∏ö tsu"
        
        TSU_PATH=$(which tsu 2>/dev/null)
        if [ -n "$TSU_PATH" ]; then
            echo "  Path: ${GREEN}$TSU_PATH${NC}"
        fi
        
        TSU_AVAILABLE=true
    else
        print_error "‡πÑ‡∏°‡πà‡∏û‡∏ö tsu"
        print_info "‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á: pkg install tsu"
        TSU_AVAILABLE=false
    fi
}

#============================================
# 3. ‡πÄ‡∏ä‡πá‡∏Ñ Magisk
#============================================
check_magisk() {
    print_section "3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Magisk"
    
    # ‡πÄ‡∏ä‡πá‡∏Ñ magisk binary
    MAGISK_PATHS=(
        "/system/xbin/su"
        "/system/bin/su"
        "/sbin/su"
        "/data/adb/magisk/busybox"
        "/data/adb/ap/magisk"
        "/data/adb/ksu/bin/su"
    )
    
    MAGISK_FOUND=false
    for path in "${MAGISK_PATHS[@]}"; do
        if [ -f "$path" ]; then
            print_success "‡∏û‡∏ö Magisk su: $path"
            MAGISK_FOUND=true
            
            # ‡∏•‡∏≠‡∏á‡∏î‡∏π version
            VERSION=$("$path" -v 2>/dev/null || echo "unknown")
            if [ "$VERSION" != "unknown" ]; then
                echo "  Version: ${GREEN}$VERSION${NC}"
            fi
            break
        fi
    done
    
    if [ "$MAGISK_FOUND" = false ]; then
        print_warning "‡πÑ‡∏°‡πà‡∏û‡∏ö Magisk su ‡πÉ‡∏ô path ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô"
    fi
    
    # ‡πÄ‡∏ä‡πá‡∏Ñ Magisk app
    if pm list packages 2>/dev/null | grep -q "com.topjohnwu.magisk"; then
        print_success "‡∏û‡∏ö Magisk Manager app"
    fi
}

#============================================
# 4. ‡πÄ‡∏ä‡πá‡∏Ñ SuperSU
#============================================
check_supersu() {
    print_section "4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SuperSU"
    
    # ‡πÄ‡∏ä‡πá‡∏Ñ SuperSU binary
    SUPERSU_PATHS=(
        "/system/xbin/su"
        "/system/bin/.ext/.su"
        "/system/xbin/daemonsu"
    )
    
    for path in "${SUPERSU_PATHS[@]}"; do
        if [ -f "$path" ]; then
            # ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô SuperSU ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if "$path" -v 2>/dev/null | grep -qi "supersu"; then
                print_success "‡∏û‡∏ö SuperSU: $path"
                VERSION=$("$path" -v 2>/dev/null)
                echo "  Version: ${GREEN}$VERSION${NC}"
                return 0
            fi
        fi
    done
    
    print_info "‡πÑ‡∏°‡πà‡∏û‡∏ö SuperSU"
}

#============================================
# 5. ‡πÄ‡∏ä‡πá‡∏Ñ KernelSU
#============================================
check_kernelsu() {
    print_section "5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö KernelSU"
    
    if [ -f "/data/adb/ksu/bin/su" ]; then
        print_success "‡∏û‡∏ö KernelSU"
        VERSION=$(/data/adb/ksu/bin/su -v 2>/dev/null || echo "unknown")
        if [ "$VERSION" != "unknown" ]; then
            echo "  Version: ${GREEN}$VERSION${NC}"
        fi
    else
        print_info "‡πÑ‡∏°‡πà‡∏û‡∏ö KernelSU"
    fi
}

#============================================
# 6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö root access
#============================================
test_root_access() {
    print_section "6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Root Access"
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ su
    if [ "$SU_AVAILABLE" = true ]; then
        echo -n "  Testing su... "
        if su -c "echo test" &>/dev/null; then
            echo -e "${GREEN}‚úì Working${NC}"
            ROOT_WORKS_SU=true
            
            # ‡∏î‡∏π uid
            ROOT_UID=$(su -c "id -u" 2>/dev/null)
            if [ "$ROOT_UID" = "0" ]; then
                echo "    UID: ${GREEN}0 (root)${NC}"
            else
                echo "    UID: ${RED}$ROOT_UID (not root!)${NC}"
            fi
        else
            echo -e "${RED}‚úó Failed${NC}"
            ROOT_WORKS_SU=false
        fi
    fi
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ tsu
    if [ "$TSU_AVAILABLE" = true ]; then
        echo -n "  Testing tsu... "
        if tsu -c "echo test" &>/dev/null; then
            echo -e "${GREEN}‚úì Working${NC}"
            ROOT_WORKS_TSU=true
            
            ROOT_UID=$(tsu -c "id -u" 2>/dev/null)
            if [ "$ROOT_UID" = "0" ]; then
                echo "    UID: ${GREEN}0 (root)${NC}"
            fi
        else
            echo -e "${RED}‚úó Failed${NC}"
            ROOT_WORKS_TSU=false
        fi
    fi
}

#============================================
# 7. ‡πÄ‡∏ä‡πá‡∏Ñ su paths ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
#============================================
check_all_su_paths() {
    print_section "7. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ su ‡∏ó‡∏∏‡∏Å path"
    
    COMMON_PATHS=(
        "/system/bin/su"
        "/system/xbin/su"
        "/system/sbin/su"
        "/sbin/su"
        "/su/bin/su"
        "/data/local/bin/su"
        "/data/local/su"
        "/data/adb/magisk/busybox"
        "/data/adb/ap/magisk"
        "/data/adb/ksu/bin/su"
        "/system/bin/.ext/.su"
        "/system/xbin/daemonsu"
    )
    
    FOUND_COUNT=0
    for path in "${COMMON_PATHS[@]}"; do
        if [ -f "$path" ]; then
            print_success "‡∏û‡∏ö: $path"
            
            # ‡∏î‡∏π permissions
            PERMS=$(ls -l "$path" 2>/dev/null | awk '{print $1}')
            echo "    Permissions: $PERMS"
            
            # ‡∏î‡∏π owner
            OWNER=$(ls -l "$path" 2>/dev/null | awk '{print $3":"$4}')
            echo "    Owner: $OWNER"
            
            # ‡∏•‡∏≠‡∏á‡∏î‡∏π version
            if [ -x "$path" ]; then
                VERSION=$("$path" -v 2>/dev/null || "$path" --version 2>/dev/null || echo "")
                if [ -n "$VERSION" ]; then
                    echo "    Version: ${GREEN}$VERSION${NC}"
                fi
            fi
            
            FOUND_COUNT=$((FOUND_COUNT + 1))
            echo ""
        fi
    done
    
    if [ $FOUND_COUNT -eq 0 ]; then
        print_warning "‡πÑ‡∏°‡πà‡∏û‡∏ö su ‡πÉ‡∏ô path ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"
    else
        print_info "‡∏û‡∏ö su ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: $FOUND_COUNT ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"
    fi
}

#============================================
# 8. ‡πÄ‡∏ä‡πá‡∏Ñ Environment Variables
#============================================
check_environment() {
    print_section "8. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Environment"
    
    # ‡πÄ‡∏ä‡πá‡∏Ñ PATH
    echo "PATH directories:"
    echo "$PATH" | tr ':' '\n' | while read -r dir; do
        if [ -d "$dir" ]; then
            if ls -la "$dir/su" 2>/dev/null | grep -q "su"; then
                echo "  ${GREEN}‚úì${NC} $dir (‡∏°‡∏µ su)"
            else
                echo "    $dir"
            fi
        fi
    done
    
    echo ""
    
    # ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ root-repo ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    if pkg list-installed 2>/dev/null | grep -q "root-repo"; then
        print_success "root-repo: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß"
    else
        print_warning "root-repo: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á"
        print_info "‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á: pkg install root-repo"
    fi
}

#============================================
# 9. ‡πÄ‡∏ä‡πá‡∏Ñ SELinux
#============================================
check_selinux() {
    print_section "9. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SELinux"
    
    if command_exists getenforce; then
        SELINUX_STATUS=$(getenforce 2>/dev/null || echo "Unknown")
        
        case "$SELINUX_STATUS" in
            Enforcing)
                echo "  Status: ${RED}Enforcing${NC} (‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"
                print_info "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: su -c 'setenforce 0'"
                ;;
            Permissive)
                echo "  Status: ${GREEN}Permissive${NC} (‡∏î‡∏µ)"
                ;;
            Disabled)
                echo "  Status: ${BLUE}Disabled${NC}"
                ;;
            *)
                echo "  Status: ${YELLOW}$SELINUX_STATUS${NC}"
                ;;
        esac
    else
        print_info "getenforce ‡πÑ‡∏°‡πà‡∏û‡∏ö"
    fi
}

#============================================
# 10. ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
#============================================
show_recommendations() {
    print_section "10. ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"
    
    HAS_ROOT=false
    
    if [ "$ROOT_WORKS_SU" = true ] || [ "$ROOT_WORKS_TSU" = true ]; then
        HAS_ROOT=true
        print_success "Root access: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ!"
        echo ""
        
        if [ "$ROOT_WORKS_TSU" = true ]; then
            echo "  ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ: ${GREEN}tsu${NC}"
            echo "  ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: tsu -c 'whoami'"
        elif [ "$ROOT_WORKS_SU" = true ]; then
            echo "  ‡πÉ‡∏ä‡πâ: ${GREEN}su${NC}"
            echo "  ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: su -c 'whoami'"
        fi
    else
        print_error "Root access: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ"
        echo ""
        
        # ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ
        echo "${YELLOW}‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:${NC}"
        echo ""
        
        if [ "$SU_AVAILABLE" = false ]; then
            echo "1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á root-repo ‡πÅ‡∏•‡∏∞ tsu:"
            echo "   ${CYAN}pkg install root-repo${NC}"
            echo "   ${CYAN}pkg install tsu${NC}"
            echo ""
        fi
        
        if [ "$MAGISK_FOUND" = false ]; then
            echo "2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Magisk:"
            echo "   - ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î: https://github.com/topjohnwu/Magisk/releases"
            echo "   - ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Magisk app"
            echo "   - Root ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠"
            echo ""
        fi
        
        echo "3. ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Termux ‡πÉ‡∏ô Magisk:"
        echo "   - ‡πÄ‡∏õ‡∏¥‡∏î Magisk app"
        echo "   - Superuser ‚Üí ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï Termux"
        echo ""
    fi
}

#============================================
# ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
#============================================
show_summary() {
    echo ""
    echo -e "${BLUE}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${NC}"
    echo -e "${BLUE}‚ïë              üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•                  ‚ïë${NC}"
    echo -e "${BLUE}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
    echo ""
    
    # Root Status
    if [ "$ROOT_WORKS_SU" = true ] || [ "$ROOT_WORKS_TSU" = true ]; then
        echo -e "Root Status: ${GREEN}‚úì Available${NC}"
    else
        echo -e "Root Status: ${RED}‚úó Not Available${NC}"
    fi
    
    # Available Commands
    echo ""
    echo "Available Commands:"
    [ "$SU_AVAILABLE" = true ] && echo -e "  ${GREEN}‚úì${NC} su"
    [ "$TSU_AVAILABLE" = true ] && echo -e "  ${GREEN}‚úì${NC} tsu"
    [ "$SU_AVAILABLE" = false ] && [ "$TSU_AVAILABLE" = false ] && echo -e "  ${RED}‚úó${NC} None"
    
    # Root Method
    echo ""
    echo "Root Method:"
    [ "$MAGISK_FOUND" = true ] && echo -e "  ${GREEN}‚úì${NC} Magisk"
    [ -f "/data/adb/ksu/bin/su" ] && echo -e "  ${GREEN}‚úì${NC} KernelSU"
    
    echo ""
}

#============================================
# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå report
#============================================
create_report() {
    REPORT_FILE="$HOME/root-check-report.txt"
    
    {
        echo "Root Access Check Report"
        echo "Generated: $(date)"
        echo "================================"
        echo ""
        echo "Root Status:"
        [ "$ROOT_WORKS_SU" = true ] && echo "  su: Working"
        [ "$ROOT_WORKS_TSU" = true ] && echo "  tsu: Working"
        [ "$ROOT_WORKS_SU" = false ] && [ "$ROOT_WORKS_TSU" = false ] && echo "  No root access"
        echo ""
        echo "Available su paths:"
        for path in "${COMMON_PATHS[@]}"; do
            [ -f "$path" ] && echo "  - $path"
        done
        echo ""
        echo "Environment:"
        echo "  PATH: $PATH"
    } > "$REPORT_FILE"
    
    print_info "Report saved: $REPORT_FILE"
}

#============================================
# Main Program
#============================================
main() {
    # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    print_header
    check_termux
    
    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
    check_su_command
    check_tsu
    check_magisk
    check_supersu
    check_kernelsu
    test_root_access
    check_all_su_paths
    check_environment
    check_selinux
    
    # ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
    show_recommendations
    
    # ‡∏™‡∏£‡∏∏‡∏õ
    show_summary
    
    # ‡∏™‡∏£‡πâ‡∏≤‡∏á report
    echo ""
    read -p "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å report ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (y/n): " save_report
    if [[ "$save_report" =~ ^[Yy]$ ]]; then
        create_report
    fi
    
    echo ""
    echo -e "${GREEN}‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!${NC}"
    echo ""
}

# ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
main "$@"
